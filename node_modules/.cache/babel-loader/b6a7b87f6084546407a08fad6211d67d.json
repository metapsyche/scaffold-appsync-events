{"ast":null,"code":"var _jsxFileName = \"/Users/roaldmaravillas/ro/sandbox/aws-mobile-appsync-events-starter-react/src/Components/NewEvent.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { v4 as uuid } from \"uuid\";\nimport { graphql } from \"react-apollo\";\nimport QueryAllEvents from \"../GraphQL/QueryAllEvents\";\nimport QueryGetEvent from \"../GraphQL/QueryGetEvent\";\nimport MutationCreateEvent from \"../GraphQL/MutationCreateEvent\";\nimport DatePicker from 'react-datepicker';\nimport moment from 'moment';\nimport { nearest15min } from \"../Utils\";\nimport DateTimePickerCustomInput from \"./DateTimePickerCustomInput\";\n\nclass NewEvent extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      event: {\n        name: '',\n        when: nearest15min().format(),\n        where: '',\n        description: ''\n      }\n    };\n\n    this.handleSave = async e => {\n      e.stopPropagation();\n      e.preventDefault();\n      const {\n        createEvent,\n        history\n      } = this.props;\n      const {\n        event\n      } = this.state;\n      await createEvent({ ...event\n      });\n      history.push('/');\n    };\n  }\n\n  handleChange(field, _ref) {\n    let {\n      target: {\n        value\n      }\n    } = _ref;\n    const {\n      event\n    } = this.state;\n    event[field] = value;\n    this.setState({\n      event\n    });\n  }\n\n  handleDateChange(field, value) {\n    this.handleChange(field, {\n      target: {\n        value: value.format()\n      }\n    });\n  }\n\n  render() {\n    const {\n      event\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui container raised very padded segment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"ui header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, \"Create an event\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"field required eight wide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 25\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"name\",\n      value: event.name,\n      onChange: this.handleChange.bind(this, 'name'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"field required eight wide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"when\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }, \"When\"), /*#__PURE__*/React.createElement(DatePicker, {\n      className: \"ui container\",\n      customInput: /*#__PURE__*/React.createElement(DateTimePickerCustomInput, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 42\n        }\n      }),\n      id: \"when\",\n      selected: moment(event.when),\n      onChange: this.handleDateChange.bind(this, 'when'),\n      peekNextMonth: true,\n      showMonthDropdown: true,\n      showYearDropdown: true,\n      dropdownMode: \"select\",\n      showTimeSelect: true,\n      timeFormat: \"hh:mm a\",\n      timeIntervals: 15,\n      dateFormat: \"LL LT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"field required eight wide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"where\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }\n    }, \"Where\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"where\",\n      value: event.where,\n      onChange: this.handleChange.bind(this, 'where'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"field required eight wide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 25\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"description\",\n      id: \"description\",\n      rows: \"10\",\n      value: event.description,\n      onChange: this.handleChange.bind(this, 'description'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      className: \"ui button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }\n    }, \"Cancel\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"or\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"ui positive button\",\n      onClick: this.handleSave,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 25\n      }\n    }, \"Save\"))));\n  }\n\n}\n\nNewEvent.defaultProps = {\n  createEvent: () => null\n};\nexport default graphql(MutationCreateEvent, {\n  props: props => ({\n    createEvent: event => {\n      return props.mutate({\n        update: (proxy, _ref2) => {\n          let {\n            data: {\n              createEvent\n            }\n          } = _ref2;\n          // Update QueryAllEvents\n          const query = QueryAllEvents;\n          const data = proxy.readQuery({\n            query\n          });\n          data.listEvents.items = [...data.listEvents.items.filter(e => e.id !== createEvent.id), createEvent];\n          proxy.writeQuery({\n            query,\n            data\n          }); // Create cache entry for QueryGetEvent\n\n          const query2 = QueryGetEvent;\n          const variables = {\n            id: createEvent.id\n          };\n          const data2 = {\n            getEvent: { ...createEvent\n            }\n          };\n          proxy.writeQuery({\n            query: query2,\n            variables,\n            data: data2\n          });\n        },\n        variables: event,\n        optimisticResponse: () => ({\n          createEvent: { ...event,\n            id: uuid(),\n            __typename: 'Event',\n            comments: {\n              __typename: 'CommentConnection',\n              items: []\n            }\n          }\n        })\n      });\n    }\n  })\n})(NewEvent);","map":{"version":3,"names":["React","Component","Link","v4","uuid","graphql","QueryAllEvents","QueryGetEvent","MutationCreateEvent","DatePicker","moment","nearest15min","DateTimePickerCustomInput","NewEvent","state","event","name","when","format","where","description","handleSave","e","stopPropagation","preventDefault","createEvent","history","props","push","handleChange","field","target","value","setState","handleDateChange","render","bind","defaultProps","mutate","update","proxy","data","query","readQuery","listEvents","items","filter","id","writeQuery","query2","variables","data2","getEvent","optimisticResponse","__typename","comments"],"sources":["/Users/roaldmaravillas/ro/sandbox/aws-mobile-appsync-events-starter-react/src/Components/NewEvent.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { v4 as uuid } from \"uuid\";\nimport { graphql } from \"react-apollo\";\nimport QueryAllEvents from \"../GraphQL/QueryAllEvents\";\nimport QueryGetEvent from \"../GraphQL/QueryGetEvent\";\nimport MutationCreateEvent from \"../GraphQL/MutationCreateEvent\";\n\nimport DatePicker from 'react-datepicker';\nimport moment from 'moment';\n\nimport { nearest15min } from \"../Utils\";\nimport DateTimePickerCustomInput from \"./DateTimePickerCustomInput\";\n\nclass NewEvent extends Component {\n\n    static defaultProps = {\n        createEvent: () => null,\n    }\n\n    state = {\n        event: {\n            name: '',\n            when: nearest15min().format(),\n            where: '',\n            description: '',\n        }\n    };\n\n    handleChange(field, { target: { value } }) {\n        const { event } = this.state;\n\n        event[field] = value;\n\n        this.setState({ event });\n    }\n\n    handleDateChange(field, value) {\n        this.handleChange(field, { target: { value: value.format() } });\n    }\n\n    handleSave = async (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n\n        const { createEvent, history } = this.props;\n        const { event } = this.state;\n\n        await createEvent({ ...event });\n\n        history.push('/');\n    }\n\n    render() {\n        const { event } = this.state;\n\n        return (\n            <div className=\"ui container raised very padded segment\">\n                <h1 className=\"ui header\">Create an event</h1>\n                <div className=\"ui form\">\n                    <div className=\"field required eight wide\">\n                        <label htmlFor=\"name\">Name</label>\n                        <input type=\"text\" id=\"name\" value={event.name} onChange={this.handleChange.bind(this, 'name')} />\n                    </div>\n                    <div className=\"field required eight wide\">\n                        <label htmlFor=\"when\">When</label>\n                        <DatePicker\n                            className=\"ui container\"\n                            customInput={<DateTimePickerCustomInput />}\n                            id=\"when\"\n                            selected={moment(event.when)}\n                            onChange={this.handleDateChange.bind(this, 'when')}\n                            peekNextMonth\n                            showMonthDropdown\n                            showYearDropdown\n                            dropdownMode=\"select\"\n                            showTimeSelect\n                            timeFormat=\"hh:mm a\"\n                            timeIntervals={15}\n                            dateFormat=\"LL LT\"\n                        />\n                    </div>\n                    <div className=\"field required eight wide\">\n                        <label htmlFor=\"where\">Where</label>\n                        <input type=\"text\" id=\"where\" value={event.where} onChange={this.handleChange.bind(this, 'where')} />\n                    </div>\n                    <div className=\"field required eight wide\">\n                        <label htmlFor=\"description\">Description</label>\n                        <textarea name=\"description\" id=\"description\" rows=\"10\" value={event.description}\n                            onChange={this.handleChange.bind(this, 'description')}></textarea>\n                    </div>\n                    <div className=\"ui buttons\">\n                        <Link to=\"/\" className=\"ui button\">Cancel</Link>\n                        <div className=\"or\"></div>\n                        <button className=\"ui positive button\" onClick={this.handleSave}>Save</button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}\n\nexport default graphql(\n    MutationCreateEvent,\n    {\n        props: (props) => ({\n            createEvent: (event) => {\n                return props.mutate({\n                    update: (proxy, { data: { createEvent } }) => {\n                        // Update QueryAllEvents\n                        const query = QueryAllEvents;\n                        const data = proxy.readQuery({ query });\n\n                        data.listEvents.items = [...data.listEvents.items.filter(e => e.id !== createEvent.id), createEvent];\n\n                        proxy.writeQuery({ query, data });\n\n                        // Create cache entry for QueryGetEvent\n                        const query2 = QueryGetEvent;\n                        const variables = { id: createEvent.id };\n                        const data2 = { getEvent: { ...createEvent } };\n\n                        proxy.writeQuery({ query: query2, variables, data: data2 });\n                    },\n                    variables: event,\n                    optimisticResponse: () => ({\n                        createEvent: {\n                            ...event, id: uuid(), __typename: 'Event', comments: { __typename: 'CommentConnection', items: [] }\n                        }\n                    }),\n                })\n            }\n        })\n    }\n)(NewEvent);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}