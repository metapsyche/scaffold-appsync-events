{"ast":null,"code":"var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nimport { REHYDRATE } from './constants';\nimport isStatePlainEnough from './utils/isStatePlainEnough';\nexport default function autoRehydrate() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var stateReconciler = config.stateReconciler || defaultStateReconciler;\n  return function (next) {\n    return function (reducer, initialState, enhancer) {\n      var store = next(liftReducer(reducer), initialState, enhancer);\n      return _extends({}, store, {\n        replaceReducer: function replaceReducer(reducer) {\n          return store.replaceReducer(liftReducer(reducer));\n        }\n      });\n    };\n  };\n\n  function liftReducer(reducer) {\n    var rehydrated = false;\n    var preRehydrateActions = [];\n    return function (state, action) {\n      if (action.type !== REHYDRATE) {\n        if (config.log && !rehydrated) preRehydrateActions.push(action); // store pre-rehydrate actions for debugging\n\n        return reducer(state, action);\n      } else {\n        if (config.log && !rehydrated) logPreRehydrate(preRehydrateActions);\n        rehydrated = true;\n        var inboundState = action.payload;\n        var reducedState = reducer(state, action);\n        return stateReconciler(state, inboundState, reducedState, config.log);\n      }\n    };\n  }\n}\n\nfunction logPreRehydrate(preRehydrateActions) {\n  var concernedActions = preRehydrateActions.slice(1);\n\n  if (concernedActions.length > 0) {\n    console.log('\\n      redux-persist/autoRehydrate: %d actions were fired before rehydration completed. This can be a symptom of a race\\n      condition where the rehydrate action may overwrite the previously affected state. Consider running these actions\\n      after rehydration:\\n    ', concernedActions.length, concernedActions);\n  }\n}\n\nfunction defaultStateReconciler(state, inboundState, reducedState, log) {\n  var newState = _extends({}, reducedState);\n\n  Object.keys(inboundState).forEach(function (key) {\n    // if initialState does not have key, skip auto rehydration\n    if (!state.hasOwnProperty(key)) return; // if initial state is an object but inbound state is null/undefined, skip\n\n    if (_typeof(state[key]) === 'object' && !inboundState[key]) {\n      if (log) console.log('redux-persist/autoRehydrate: sub state for key `%s` is falsy but initial state is an object, skipping autoRehydrate.', key);\n      return;\n    } // if reducer modifies substate, skip auto rehydration\n\n\n    if (state[key] !== reducedState[key]) {\n      if (log) console.log('redux-persist/autoRehydrate: sub state for key `%s` modified, skipping autoRehydrate.', key);\n      newState[key] = reducedState[key];\n      return;\n    } // otherwise take the inboundState\n\n\n    if (isStatePlainEnough(inboundState[key]) && isStatePlainEnough(state[key])) newState[key] = _extends({}, state[key], inboundState[key]); // shallow merge\n    else newState[key] = inboundState[key]; // hard set\n\n    if (log) console.log('redux-persist/autoRehydrate: key `%s`, rehydrated to ', key, newState[key]);\n  });\n  return newState;\n}","map":{"version":3,"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","REHYDRATE","isStatePlainEnough","autoRehydrate","config","undefined","stateReconciler","defaultStateReconciler","next","reducer","initialState","enhancer","store","liftReducer","replaceReducer","rehydrated","preRehydrateActions","state","action","type","log","push","logPreRehydrate","inboundState","payload","reducedState","concernedActions","slice","console","newState","keys","forEach"],"sources":["/Users/roaldmaravillas/ro/github/scaffold-appsync-events/node_modules/redux-persist/es/autoRehydrate.js"],"sourcesContent":["var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport { REHYDRATE } from './constants';\nimport isStatePlainEnough from './utils/isStatePlainEnough';\n\nexport default function autoRehydrate() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var stateReconciler = config.stateReconciler || defaultStateReconciler;\n\n  return function (next) {\n    return function (reducer, initialState, enhancer) {\n      var store = next(liftReducer(reducer), initialState, enhancer);\n      return _extends({}, store, {\n        replaceReducer: function replaceReducer(reducer) {\n          return store.replaceReducer(liftReducer(reducer));\n        }\n      });\n    };\n  };\n\n  function liftReducer(reducer) {\n    var rehydrated = false;\n    var preRehydrateActions = [];\n    return function (state, action) {\n      if (action.type !== REHYDRATE) {\n        if (config.log && !rehydrated) preRehydrateActions.push(action); // store pre-rehydrate actions for debugging\n        return reducer(state, action);\n      } else {\n        if (config.log && !rehydrated) logPreRehydrate(preRehydrateActions);\n        rehydrated = true;\n\n        var inboundState = action.payload;\n        var reducedState = reducer(state, action);\n\n        return stateReconciler(state, inboundState, reducedState, config.log);\n      }\n    };\n  }\n}\n\nfunction logPreRehydrate(preRehydrateActions) {\n  var concernedActions = preRehydrateActions.slice(1);\n  if (concernedActions.length > 0) {\n    console.log('\\n      redux-persist/autoRehydrate: %d actions were fired before rehydration completed. This can be a symptom of a race\\n      condition where the rehydrate action may overwrite the previously affected state. Consider running these actions\\n      after rehydration:\\n    ', concernedActions.length, concernedActions);\n  }\n}\n\nfunction defaultStateReconciler(state, inboundState, reducedState, log) {\n  var newState = _extends({}, reducedState);\n\n  Object.keys(inboundState).forEach(function (key) {\n    // if initialState does not have key, skip auto rehydration\n    if (!state.hasOwnProperty(key)) return;\n\n    // if initial state is an object but inbound state is null/undefined, skip\n    if (_typeof(state[key]) === 'object' && !inboundState[key]) {\n      if (log) console.log('redux-persist/autoRehydrate: sub state for key `%s` is falsy but initial state is an object, skipping autoRehydrate.', key);\n      return;\n    }\n\n    // if reducer modifies substate, skip auto rehydration\n    if (state[key] !== reducedState[key]) {\n      if (log) console.log('redux-persist/autoRehydrate: sub state for key `%s` modified, skipping autoRehydrate.', key);\n      newState[key] = reducedState[key];\n      return;\n    }\n\n    // otherwise take the inboundState\n    if (isStatePlainEnough(inboundState[key]) && isStatePlainEnough(state[key])) newState[key] = _extends({}, state[key], inboundState[key]); // shallow merge\n    else newState[key] = inboundState[key]; // hard set\n\n    if (log) console.log('redux-persist/autoRehydrate: key `%s`, rehydrated to ', key, newState[key]);\n  });\n  return newState;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}