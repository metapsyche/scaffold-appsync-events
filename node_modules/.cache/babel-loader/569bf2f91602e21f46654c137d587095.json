{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nimport { KEY_PREFIX } from './constants';\nimport createAsyncLocalStorage from './defaults/asyncLocalStorage';\nexport default function getStoredState(config, onComplete) {\n  var storage = config.storage || createAsyncLocalStorage('local');\n  var deserializer = config.serialize === false ? function (data) {\n    return data;\n  } : defaultDeserializer;\n  var blacklist = config.blacklist || [];\n  var whitelist = config.whitelist || false;\n  var transforms = config.transforms || [];\n  var keyPrefix = config.keyPrefix !== undefined ? config.keyPrefix : KEY_PREFIX; // fallback getAllKeys to `keys` if present (LocalForage compatability)\n\n  if (storage.keys && !storage.getAllKeys) storage = _extends({}, storage, {\n    getAllKeys: storage.keys\n  });\n  var restoredState = {};\n  var completionCount = 0;\n  storage.getAllKeys(function (err, allKeys) {\n    if (err) {\n      if (process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error in storage.getAllKeys');\n      complete(err);\n    }\n\n    var persistKeys = allKeys.filter(function (key) {\n      return key.indexOf(keyPrefix) === 0;\n    }).map(function (key) {\n      return key.slice(keyPrefix.length);\n    });\n    var keysToRestore = persistKeys.filter(passWhitelistBlacklist);\n    var restoreCount = keysToRestore.length;\n    if (restoreCount === 0) complete(null, restoredState);\n    keysToRestore.forEach(function (key) {\n      storage.getItem(createStorageKey(key), function (err, serialized) {\n        if (err && process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error restoring data for key:', key, err);else restoredState[key] = rehydrate(key, serialized);\n        completionCount += 1;\n        if (completionCount === restoreCount) complete(null, restoredState);\n      });\n    });\n  });\n\n  function rehydrate(key, serialized) {\n    var state = null;\n\n    try {\n      var data = deserializer(serialized);\n      state = transforms.reduceRight(function (subState, transformer) {\n        return transformer.out(subState, key);\n      }, data);\n    } catch (err) {\n      if (process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error restoring data for key:', key, err);\n    }\n\n    return state;\n  }\n\n  function complete(err, restoredState) {\n    onComplete(err, restoredState);\n  }\n\n  function passWhitelistBlacklist(key) {\n    if (whitelist && whitelist.indexOf(key) === -1) return false;\n    if (blacklist.indexOf(key) !== -1) return false;\n    return true;\n  }\n\n  function createStorageKey(key) {\n    return '' + keyPrefix + key;\n  }\n\n  if (typeof onComplete !== 'function' && !!Promise) {\n    return new Promise(function (resolve, reject) {\n      onComplete = function onComplete(err, restoredState) {\n        if (err) reject(err);else resolve(restoredState);\n      };\n    });\n  }\n}\n\nfunction defaultDeserializer(serial) {\n  return JSON.parse(serial);\n}","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","KEY_PREFIX","createAsyncLocalStorage","getStoredState","config","onComplete","storage","deserializer","serialize","data","defaultDeserializer","blacklist","whitelist","transforms","keyPrefix","undefined","keys","getAllKeys","restoredState","completionCount","err","allKeys","process","env","NODE_ENV","console","warn","complete","persistKeys","filter","indexOf","map","slice","keysToRestore","passWhitelistBlacklist","restoreCount","forEach","getItem","createStorageKey","serialized","rehydrate","state","reduceRight","subState","transformer","out","Promise","resolve","reject","serial","JSON","parse"],"sources":["/Users/roaldmaravillas/ro/sandbox/aws-mobile-appsync-events-starter-react/node_modules/redux-persist/es/getStoredState.js"],"sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport { KEY_PREFIX } from './constants';\nimport createAsyncLocalStorage from './defaults/asyncLocalStorage';\n\nexport default function getStoredState(config, onComplete) {\n  var storage = config.storage || createAsyncLocalStorage('local');\n  var deserializer = config.serialize === false ? function (data) {\n    return data;\n  } : defaultDeserializer;\n  var blacklist = config.blacklist || [];\n  var whitelist = config.whitelist || false;\n  var transforms = config.transforms || [];\n  var keyPrefix = config.keyPrefix !== undefined ? config.keyPrefix : KEY_PREFIX;\n\n  // fallback getAllKeys to `keys` if present (LocalForage compatability)\n  if (storage.keys && !storage.getAllKeys) storage = _extends({}, storage, { getAllKeys: storage.keys });\n\n  var restoredState = {};\n  var completionCount = 0;\n\n  storage.getAllKeys(function (err, allKeys) {\n    if (err) {\n      if (process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error in storage.getAllKeys');\n      complete(err);\n    }\n\n    var persistKeys = allKeys.filter(function (key) {\n      return key.indexOf(keyPrefix) === 0;\n    }).map(function (key) {\n      return key.slice(keyPrefix.length);\n    });\n    var keysToRestore = persistKeys.filter(passWhitelistBlacklist);\n\n    var restoreCount = keysToRestore.length;\n    if (restoreCount === 0) complete(null, restoredState);\n    keysToRestore.forEach(function (key) {\n      storage.getItem(createStorageKey(key), function (err, serialized) {\n        if (err && process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error restoring data for key:', key, err);else restoredState[key] = rehydrate(key, serialized);\n        completionCount += 1;\n        if (completionCount === restoreCount) complete(null, restoredState);\n      });\n    });\n  });\n\n  function rehydrate(key, serialized) {\n    var state = null;\n\n    try {\n      var data = deserializer(serialized);\n      state = transforms.reduceRight(function (subState, transformer) {\n        return transformer.out(subState, key);\n      }, data);\n    } catch (err) {\n      if (process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error restoring data for key:', key, err);\n    }\n\n    return state;\n  }\n\n  function complete(err, restoredState) {\n    onComplete(err, restoredState);\n  }\n\n  function passWhitelistBlacklist(key) {\n    if (whitelist && whitelist.indexOf(key) === -1) return false;\n    if (blacklist.indexOf(key) !== -1) return false;\n    return true;\n  }\n\n  function createStorageKey(key) {\n    return '' + keyPrefix + key;\n  }\n\n  if (typeof onComplete !== 'function' && !!Promise) {\n    return new Promise(function (resolve, reject) {\n      onComplete = function onComplete(err, restoredState) {\n        if (err) reject(err);else resolve(restoredState);\n      };\n    });\n  }\n}\n\nfunction defaultDeserializer(serial) {\n  return JSON.parse(serial);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}