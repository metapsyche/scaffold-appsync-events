{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createOffline = exports.offline = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _redux = require(\"redux\");\n\nvar _middleware = require(\"./middleware\");\n\nvar _updater = require(\"./updater\");\n\nvar _config = require(\"./config\");\n\nvar _actions = require(\"./actions\");\n\nvar _offlineActionTracker = _interopRequireDefault(require(\"./offlineActionTracker\"));\n/* global $Shape */\n// @TODO: Take createStore as config?\n\n\nvar warnIfNotReduxAction = function warnIfNotReduxAction(config, key) {\n  var maybeAction = config[key];\n  var isNotReduxAction = maybeAction === null || (0, _typeof2.default)(maybeAction) !== 'object' || typeof maybeAction.type !== 'string' || maybeAction.type === '';\n\n  if (isNotReduxAction && console.warn) {\n    var msg = \"\".concat(key, \" must be a proper redux action, \") + \"i.e. it must be an object and have a non-empty string type. \" + \"Instead you provided: \".concat(JSON.stringify(maybeAction, null, 2));\n    console.warn(msg);\n  }\n};\n\nvar offline = function offline() {\n  var userConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (createStore) {\n    return function (reducer, preloadedState) {\n      var enhancer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (x) {\n        return x;\n      };\n      var config = (0, _config.applyDefaults)(userConfig);\n      warnIfNotReduxAction(config, 'defaultCommit');\n      warnIfNotReduxAction(config, 'defaultRollback'); // toggle experimental returned promises\n\n      config.offlineActionTracker = config.returnPromises ? _offlineActionTracker.default.withPromises : _offlineActionTracker.default.withoutPromises;\n      delete config.returnPromises; // wraps userland reducer with a top-level\n      // reducer that handles offline state updating\n\n      var offlineReducer = (0, _updater.enhanceReducer)(reducer, config); // $FlowFixMe\n\n      var offlineMiddleware = (0, _redux.applyMiddleware)((0, _middleware.createOfflineMiddleware)(config)); // create autoRehydrate enhancer if required\n\n      var offlineEnhancer = config.persist && config.rehydrate && config.persistAutoRehydrate ? (0, _redux.compose)(offlineMiddleware, config.persistAutoRehydrate()) : offlineMiddleware; // create store\n\n      var store = offlineEnhancer(createStore)(offlineReducer, preloadedState, enhancer);\n      var baseReplaceReducer = store.replaceReducer.bind(store); // $FlowFixMe\n\n      store.replaceReducer = function replaceReducer(nextReducer) {\n        return baseReplaceReducer((0, _updater.enhanceReducer)(nextReducer, config));\n      }; // launch store persistor\n\n\n      if (config.persist) {\n        config.persist(store, config.persistOptions, config.persistCallback);\n      } // launch network detector\n\n\n      if (config.detectNetwork) {\n        config.detectNetwork(function (online) {\n          store.dispatch((0, _actions.networkStatusChanged)(online));\n        });\n      }\n\n      return store;\n    };\n  };\n};\n\nexports.offline = offline;\n\nvar createOffline = function createOffline() {\n  var userConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var config = (0, _config.applyDefaults)(userConfig); // toggle experimental returned promises\n\n  config.offlineActionTracker = config.returnPromises ? _offlineActionTracker.default.withPromises : _offlineActionTracker.default.withoutPromises;\n  delete config.returnPromises;\n  warnIfNotReduxAction(config, 'defaultCommit');\n  warnIfNotReduxAction(config, 'defaultRollback');\n\n  var enhanceStore = function enhanceStore(next) {\n    return function (reducer, preloadedState, enhancer) {\n      // create autoRehydrate enhancer if required\n      var createStore = config.persist && config.rehydrate && config.persistAutoRehydrate ? config.persistAutoRehydrate()(next) : next; // create store\n\n      var store = createStore(reducer, preloadedState, enhancer);\n      var baseReplaceReducer = store.replaceReducer.bind(store);\n\n      store.replaceReducer = function replaceReducer(nextReducer) {\n        return baseReplaceReducer((0, _updater.enhanceReducer)(nextReducer, config));\n      }; // launch store persistor\n\n\n      if (config.persist) {\n        config.persist(store, config.persistOptions, config.persistCallback);\n      } // launch network detector\n\n\n      if (config.detectNetwork) {\n        config.detectNetwork(function (online) {\n          store.dispatch((0, _actions.networkStatusChanged)(online));\n        });\n      }\n\n      return store;\n    };\n  };\n\n  return {\n    middleware: (0, _middleware.createOfflineMiddleware)(config),\n    enhanceReducer: function enhanceReducer(reducer) {\n      return (0, _updater.enhanceReducer)(reducer, config);\n    },\n    enhanceStore: enhanceStore\n  };\n};\n\nexports.createOffline = createOffline;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","createOffline","offline","_typeof2","_redux","_middleware","_updater","_config","_actions","_offlineActionTracker","warnIfNotReduxAction","config","key","maybeAction","isNotReduxAction","default","type","console","warn","msg","concat","JSON","stringify","userConfig","arguments","length","undefined","createStore","reducer","preloadedState","enhancer","x","applyDefaults","offlineActionTracker","returnPromises","withPromises","withoutPromises","offlineReducer","enhanceReducer","offlineMiddleware","applyMiddleware","createOfflineMiddleware","offlineEnhancer","persist","rehydrate","persistAutoRehydrate","compose","store","baseReplaceReducer","replaceReducer","bind","nextReducer","persistOptions","persistCallback","detectNetwork","online","dispatch","networkStatusChanged","enhanceStore","next","middleware"],"sources":["/Users/roaldmaravillas/ro/github/scaffold-appsync-events/node_modules/@redux-offline/redux-offline/lib/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createOffline = exports.offline = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _redux = require(\"redux\");\n\nvar _middleware = require(\"./middleware\");\n\nvar _updater = require(\"./updater\");\n\nvar _config = require(\"./config\");\n\nvar _actions = require(\"./actions\");\n\nvar _offlineActionTracker = _interopRequireDefault(require(\"./offlineActionTracker\"));\n\n/* global $Shape */\n// @TODO: Take createStore as config?\nvar warnIfNotReduxAction = function warnIfNotReduxAction(config, key) {\n  var maybeAction = config[key];\n  var isNotReduxAction = maybeAction === null || (0, _typeof2.default)(maybeAction) !== 'object' || typeof maybeAction.type !== 'string' || maybeAction.type === '';\n\n  if (isNotReduxAction && console.warn) {\n    var msg = \"\".concat(key, \" must be a proper redux action, \") + \"i.e. it must be an object and have a non-empty string type. \" + \"Instead you provided: \".concat(JSON.stringify(maybeAction, null, 2));\n    console.warn(msg);\n  }\n};\n\nvar offline = function offline() {\n  var userConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (createStore) {\n    return function (reducer, preloadedState) {\n      var enhancer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (x) {\n        return x;\n      };\n      var config = (0, _config.applyDefaults)(userConfig);\n      warnIfNotReduxAction(config, 'defaultCommit');\n      warnIfNotReduxAction(config, 'defaultRollback'); // toggle experimental returned promises\n\n      config.offlineActionTracker = config.returnPromises ? _offlineActionTracker.default.withPromises : _offlineActionTracker.default.withoutPromises;\n      delete config.returnPromises; // wraps userland reducer with a top-level\n      // reducer that handles offline state updating\n\n      var offlineReducer = (0, _updater.enhanceReducer)(reducer, config); // $FlowFixMe\n\n      var offlineMiddleware = (0, _redux.applyMiddleware)((0, _middleware.createOfflineMiddleware)(config)); // create autoRehydrate enhancer if required\n\n      var offlineEnhancer = config.persist && config.rehydrate && config.persistAutoRehydrate ? (0, _redux.compose)(offlineMiddleware, config.persistAutoRehydrate()) : offlineMiddleware; // create store\n\n      var store = offlineEnhancer(createStore)(offlineReducer, preloadedState, enhancer);\n      var baseReplaceReducer = store.replaceReducer.bind(store); // $FlowFixMe\n\n      store.replaceReducer = function replaceReducer(nextReducer) {\n        return baseReplaceReducer((0, _updater.enhanceReducer)(nextReducer, config));\n      }; // launch store persistor\n\n\n      if (config.persist) {\n        config.persist(store, config.persistOptions, config.persistCallback);\n      } // launch network detector\n\n\n      if (config.detectNetwork) {\n        config.detectNetwork(function (online) {\n          store.dispatch((0, _actions.networkStatusChanged)(online));\n        });\n      }\n\n      return store;\n    };\n  };\n};\n\nexports.offline = offline;\n\nvar createOffline = function createOffline() {\n  var userConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var config = (0, _config.applyDefaults)(userConfig); // toggle experimental returned promises\n\n  config.offlineActionTracker = config.returnPromises ? _offlineActionTracker.default.withPromises : _offlineActionTracker.default.withoutPromises;\n  delete config.returnPromises;\n  warnIfNotReduxAction(config, 'defaultCommit');\n  warnIfNotReduxAction(config, 'defaultRollback');\n\n  var enhanceStore = function enhanceStore(next) {\n    return function (reducer, preloadedState, enhancer) {\n      // create autoRehydrate enhancer if required\n      var createStore = config.persist && config.rehydrate && config.persistAutoRehydrate ? config.persistAutoRehydrate()(next) : next; // create store\n\n      var store = createStore(reducer, preloadedState, enhancer);\n      var baseReplaceReducer = store.replaceReducer.bind(store);\n\n      store.replaceReducer = function replaceReducer(nextReducer) {\n        return baseReplaceReducer((0, _updater.enhanceReducer)(nextReducer, config));\n      }; // launch store persistor\n\n\n      if (config.persist) {\n        config.persist(store, config.persistOptions, config.persistCallback);\n      } // launch network detector\n\n\n      if (config.detectNetwork) {\n        config.detectNetwork(function (online) {\n          store.dispatch((0, _actions.networkStatusChanged)(online));\n        });\n      }\n\n      return store;\n    };\n  };\n\n  return {\n    middleware: (0, _middleware.createOfflineMiddleware)(config),\n    enhanceReducer: function enhanceReducer(reducer) {\n      return (0, _updater.enhanceReducer)(reducer, config);\n    },\n    enhanceStore: enhanceStore\n  };\n};\n\nexports.createOffline = createOffline;"],"mappings":"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"},"metadata":{},"sourceType":"script"}