{"ast":null,"code":"var util = require('./util');\n\nvar regionConfig = require('./region_config_data.json');\n\nfunction generateRegionPrefix(region) {\n  if (!region) return null;\n  var parts = region.split('-');\n  if (parts.length < 3) return null;\n  return parts.slice(0, parts.length - 2).join('-') + '-*';\n}\n\nfunction derivedKeys(service) {\n  var region = service.config.region;\n  var regionPrefix = generateRegionPrefix(region);\n  var endpointPrefix = service.api.endpointPrefix;\n  return [[region, endpointPrefix], [regionPrefix, endpointPrefix], [region, '*'], [regionPrefix, '*'], ['*', endpointPrefix], ['*', '*']].map(function (item) {\n    return item[0] && item[1] ? item.join('/') : null;\n  });\n}\n\nfunction applyConfig(service, config) {\n  util.each(config, function (key, value) {\n    if (key === 'globalEndpoint') return;\n\n    if (service.config[key] === undefined || service.config[key] === null) {\n      service.config[key] = value;\n    }\n  });\n}\n\nfunction configureEndpoint(service) {\n  var keys = derivedKeys(service);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!key) continue;\n\n    if (Object.prototype.hasOwnProperty.call(regionConfig.rules, key)) {\n      var config = regionConfig.rules[key];\n\n      if (typeof config === 'string') {\n        config = regionConfig.patterns[config];\n      } // set dualstack endpoint\n\n\n      if (service.config.useDualstack && util.isDualstackAvailable(service)) {\n        config = util.copy(config);\n        config.endpoint = '{service}.dualstack.{region}.amazonaws.com';\n      } // set global endpoint\n\n\n      service.isGlobalEndpoint = !!config.globalEndpoint; // signature version\n\n      if (!config.signatureVersion) config.signatureVersion = 'v4'; // merge config\n\n      applyConfig(service, config);\n      return;\n    }\n  }\n}\n/**\n * @api private\n */\n\n\nmodule.exports = configureEndpoint;","map":{"version":3,"names":["util","require","regionConfig","generateRegionPrefix","region","parts","split","length","slice","join","derivedKeys","service","config","regionPrefix","endpointPrefix","api","map","item","applyConfig","each","key","value","undefined","configureEndpoint","keys","i","Object","prototype","hasOwnProperty","call","rules","patterns","useDualstack","isDualstackAvailable","copy","endpoint","isGlobalEndpoint","globalEndpoint","signatureVersion","module","exports"],"sources":["/Users/roaldmaravillas/ro/sandbox/aws-mobile-appsync-events-starter-react/node_modules/aws-sdk/lib/region_config.js"],"sourcesContent":["var util = require('./util');\nvar regionConfig = require('./region_config_data.json');\n\nfunction generateRegionPrefix(region) {\n  if (!region) return null;\n\n  var parts = region.split('-');\n  if (parts.length < 3) return null;\n  return parts.slice(0, parts.length - 2).join('-') + '-*';\n}\n\nfunction derivedKeys(service) {\n  var region = service.config.region;\n  var regionPrefix = generateRegionPrefix(region);\n  var endpointPrefix = service.api.endpointPrefix;\n\n  return [\n    [region, endpointPrefix],\n    [regionPrefix, endpointPrefix],\n    [region, '*'],\n    [regionPrefix, '*'],\n    ['*', endpointPrefix],\n    ['*', '*']\n  ].map(function(item) {\n    return item[0] && item[1] ? item.join('/') : null;\n  });\n}\n\nfunction applyConfig(service, config) {\n  util.each(config, function(key, value) {\n    if (key === 'globalEndpoint') return;\n    if (service.config[key] === undefined || service.config[key] === null) {\n      service.config[key] = value;\n    }\n  });\n}\n\nfunction configureEndpoint(service) {\n  var keys = derivedKeys(service);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!key) continue;\n\n    if (Object.prototype.hasOwnProperty.call(regionConfig.rules, key)) {\n      var config = regionConfig.rules[key];\n      if (typeof config === 'string') {\n        config = regionConfig.patterns[config];\n      }\n\n      // set dualstack endpoint\n      if (service.config.useDualstack && util.isDualstackAvailable(service)) {\n        config = util.copy(config);\n        config.endpoint = '{service}.dualstack.{region}.amazonaws.com';\n      }\n\n      // set global endpoint\n      service.isGlobalEndpoint = !!config.globalEndpoint;\n\n      // signature version\n      if (!config.signatureVersion) config.signatureVersion = 'v4';\n\n      // merge config\n      applyConfig(service, config);\n      return;\n    }\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = configureEndpoint;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}