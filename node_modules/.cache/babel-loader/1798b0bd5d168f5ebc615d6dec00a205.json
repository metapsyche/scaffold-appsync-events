{"ast":null,"code":"\"use strict\";\n\nfunction Cache(options) {\n  this.map = new Map();\n  this.newest = null;\n  this.oldest = null;\n  this.max = options && options.max;\n  this.dispose = options && options.dispose;\n}\n\nexports.Cache = Cache;\nvar Cp = Cache.prototype;\n\nCp.has = function (key) {\n  return this.map.has(key);\n};\n\nCp.get = function (key) {\n  var entry = getEntry(this, key);\n  return entry && entry.value;\n};\n\nfunction getEntry(cache, key) {\n  var entry = cache.map.get(key);\n\n  if (entry && entry !== cache.newest) {\n    var older = entry.older;\n    var newer = entry.newer;\n\n    if (newer) {\n      newer.older = older;\n    }\n\n    if (older) {\n      older.newer = newer;\n    }\n\n    entry.older = cache.newest;\n    entry.older.newer = entry;\n    entry.newer = null;\n    cache.newest = entry;\n\n    if (entry === cache.oldest) {\n      cache.oldest = newer;\n    }\n  }\n\n  return entry;\n}\n\nCp.set = function (key, value) {\n  var entry = getEntry(this, key);\n\n  if (entry) {\n    return entry.value = value;\n  }\n\n  entry = {\n    key: key,\n    value: value,\n    newer: null,\n    older: this.newest\n  };\n\n  if (this.newest) {\n    this.newest.newer = entry;\n  }\n\n  this.newest = entry;\n  this.oldest = this.oldest || entry;\n  this.map.set(key, entry);\n  return entry.value;\n};\n\nCp.clean = function () {\n  if (typeof this.max === \"number\") {\n    while (this.oldest && this.map.size > this.max) {\n      this.delete(this.oldest.key);\n    }\n  }\n};\n\nCp.delete = function (key) {\n  var entry = this.map.get(key);\n\n  if (entry) {\n    if (entry === this.newest) {\n      this.newest = entry.older;\n    }\n\n    if (entry === this.oldest) {\n      this.oldest = entry.newer;\n    }\n\n    if (entry.newer) {\n      entry.newer.older = entry.older;\n    }\n\n    if (entry.older) {\n      entry.older.newer = entry.newer;\n    }\n\n    this.map.delete(key);\n\n    if (typeof this.dispose === \"function\") {\n      this.dispose(key, entry.value);\n    }\n\n    return true;\n  }\n\n  return false;\n};","map":{"version":3,"names":["Cache","options","map","Map","newest","oldest","max","dispose","exports","Cp","prototype","has","key","get","entry","getEntry","value","cache","older","newer","set","clean","size","delete"],"sources":["/Users/roaldmaravillas/ro/sandbox/aws-mobile-appsync-events-starter-react/node_modules/optimism/lib/cache.js"],"sourcesContent":["\"use strict\";\n\nfunction Cache(options) {\n  this.map = new Map;\n  this.newest = null;\n  this.oldest = null;\n  this.max = options && options.max;\n  this.dispose = options && options.dispose;\n}\n\nexports.Cache = Cache;\n\nvar Cp = Cache.prototype;\n\nCp.has = function (key) {\n  return this.map.has(key);\n};\n\nCp.get = function (key) {\n  var entry = getEntry(this, key);\n  return entry && entry.value;\n};\n\nfunction getEntry(cache, key) {\n  var entry = cache.map.get(key);\n  if (entry &&\n      entry !== cache.newest) {\n    var older = entry.older;\n    var newer = entry.newer;\n\n    if (newer) {\n      newer.older = older;\n    }\n\n    if (older) {\n      older.newer = newer;\n    }\n\n    entry.older = cache.newest;\n    entry.older.newer = entry;\n\n    entry.newer = null;\n    cache.newest = entry;\n\n    if (entry === cache.oldest) {\n      cache.oldest = newer;\n    }\n  }\n\n  return entry;\n}\n\nCp.set = function (key, value) {\n  var entry = getEntry(this, key);\n  if (entry) {\n    return entry.value = value;\n  }\n\n  entry = {\n    key: key,\n    value: value,\n    newer: null,\n    older: this.newest\n  };\n\n  if (this.newest) {\n    this.newest.newer = entry;\n  }\n\n  this.newest = entry;\n  this.oldest = this.oldest || entry;\n\n  this.map.set(key, entry);\n\n  return entry.value;\n};\n\nCp.clean = function () {\n  if (typeof this.max === \"number\") {\n    while (this.oldest &&\n           this.map.size > this.max) {\n      this.delete(this.oldest.key);\n    }\n  }\n};\n\nCp.delete = function (key) {\n  var entry = this.map.get(key);\n  if (entry) {\n    if (entry === this.newest) {\n      this.newest = entry.older;\n    }\n\n    if (entry === this.oldest) {\n      this.oldest = entry.newer;\n    }\n\n    if (entry.newer) {\n      entry.newer.older = entry.older;\n    }\n\n    if (entry.older) {\n      entry.older.newer = entry.newer;\n    }\n\n    this.map.delete(key);\n\n    if (typeof this.dispose === \"function\") {\n      this.dispose(key, entry.value);\n    }\n\n    return true;\n  }\n\n  return false;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}