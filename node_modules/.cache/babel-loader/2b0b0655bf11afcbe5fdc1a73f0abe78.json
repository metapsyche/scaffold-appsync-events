{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar RecordingCache = function () {\n  function RecordingCache(data) {\n    if (data === void 0) {\n      data = {};\n    }\n\n    this.data = data;\n    this.recordedData = {};\n  }\n\n  RecordingCache.prototype.record = function (transaction) {\n    transaction(this);\n    var recordedData = this.recordedData;\n    this.recordedData = {};\n    return recordedData;\n  };\n\n  RecordingCache.prototype.toObject = function () {\n    return __assign({}, this.data, this.recordedData);\n  };\n\n  RecordingCache.prototype.get = function (dataId) {\n    if (this.recordedData.hasOwnProperty(dataId)) {\n      return this.recordedData[dataId];\n    }\n\n    return this.data[dataId];\n  };\n\n  RecordingCache.prototype.set = function (dataId, value) {\n    if (this.get(dataId) !== value) {\n      this.recordedData[dataId] = value;\n    }\n  };\n\n  RecordingCache.prototype.delete = function (dataId) {\n    this.recordedData[dataId] = undefined;\n  };\n\n  RecordingCache.prototype.clear = function () {\n    var _this = this;\n\n    Object.keys(this.data).forEach(function (dataId) {\n      return _this.delete(dataId);\n    });\n    this.recordedData = {};\n  };\n\n  RecordingCache.prototype.replace = function (newData) {\n    this.clear();\n    this.recordedData = __assign({}, newData);\n  };\n\n  return RecordingCache;\n}();\n\nexport { RecordingCache };\nexport function record(startingState, transaction) {\n  var recordingCache = new RecordingCache(startingState);\n  return recordingCache.record(transaction);\n}","map":{"version":3,"sources":["../src/recordingCache.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA,IAAA,cAAA,GAAA,YAAA;EAGE,SAAA,cAAA,CAA6B,IAA7B,EAA6D;IAAhC,IAAA,IAAA,KAAA,KAAA,CAAA,EAAA;MAAA,IAAA,GAAA,EAAA;IAAgC;;IAAhC,KAAA,IAAA,GAAA,IAAA;IAFrB,KAAA,YAAA,GAAsC,EAAtC;EAEyD;;EAE1D,cAAA,CAAA,SAAA,CAAA,MAAA,GAAP,UACE,WADF,EACuD;IAErD,WAAW,CAAC,IAAD,CAAX;IACA,IAAM,YAAY,GAAG,KAAK,YAA1B;IACA,KAAK,YAAL,GAAoB,EAApB;IACA,OAAO,YAAP;EACD,CAPM;;EASA,cAAA,CAAA,SAAA,CAAA,QAAA,GAAP,YAAA;IACE,OAAA,QAAA,CAAA,EAAA,EAAY,KAAK,IAAjB,EAA0B,KAAK,YAA/B,CAAA;EACD,CAFM;;EAIA,cAAA,CAAA,SAAA,CAAA,GAAA,GAAP,UAAW,MAAX,EAAyB;IACvB,IAAI,KAAK,YAAL,CAAkB,cAAlB,CAAiC,MAAjC,CAAJ,EAA8C;MAE5C,OAAO,KAAK,YAAL,CAAkB,MAAlB,CAAP;IACD;;IACD,OAAO,KAAK,IAAL,CAAU,MAAV,CAAP;EACD,CANM;;EAQA,cAAA,CAAA,SAAA,CAAA,GAAA,GAAP,UAAW,MAAX,EAA2B,KAA3B,EAA6C;IAC3C,IAAI,KAAK,GAAL,CAAS,MAAT,MAAqB,KAAzB,EAAgC;MAC9B,KAAK,YAAL,CAAkB,MAAlB,IAA4B,KAA5B;IACD;EACF,CAJM;;EAMA,cAAA,CAAA,SAAA,CAAA,MAAA,GAAP,UAAc,MAAd,EAA4B;IAC1B,KAAK,YAAL,CAAkB,MAAlB,IAA4B,SAA5B;EACD,CAFM;;EAIA,cAAA,CAAA,SAAA,CAAA,KAAA,GAAP,YAAA;IAAA,IAAA,KAAA,GAAA,IAAA;;IACE,MAAM,CAAC,IAAP,CAAY,KAAK,IAAjB,EAAuB,OAAvB,CAA+B,UAAA,MAAA,EAAM;MAAI,OAAA,KAAI,CAAC,MAAL,CAAA,MAAA,CAAA;IAAmB,CAA5D;IACA,KAAK,YAAL,GAAoB,EAApB;EACD,CAHM;;EAKA,cAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,OAAf,EAA6C;IAC3C,KAAK,KAAL;IACA,KAAK,YAAL,GAAiB,QAAA,CAAA,EAAA,EAAQ,OAAR,CAAjB;EACD,CAHM;;EAIT,OAAA,cAAA;AAAC,CA7CD,EAAA;;;AA+CA,OAAM,SAAU,MAAV,CACJ,aADI,EAEJ,WAFI,EAEiD;EAErD,IAAM,cAAc,GAAG,IAAI,cAAJ,CAAmB,aAAnB,CAAvB;EACA,OAAO,cAAc,CAAC,MAAf,CAAsB,WAAtB,CAAP;AACD","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar RecordingCache = (function () {\n    function RecordingCache(data) {\n        if (data === void 0) { data = {}; }\n        this.data = data;\n        this.recordedData = {};\n    }\n    RecordingCache.prototype.record = function (transaction) {\n        transaction(this);\n        var recordedData = this.recordedData;\n        this.recordedData = {};\n        return recordedData;\n    };\n    RecordingCache.prototype.toObject = function () {\n        return __assign({}, this.data, this.recordedData);\n    };\n    RecordingCache.prototype.get = function (dataId) {\n        if (this.recordedData.hasOwnProperty(dataId)) {\n            return this.recordedData[dataId];\n        }\n        return this.data[dataId];\n    };\n    RecordingCache.prototype.set = function (dataId, value) {\n        if (this.get(dataId) !== value) {\n            this.recordedData[dataId] = value;\n        }\n    };\n    RecordingCache.prototype.delete = function (dataId) {\n        this.recordedData[dataId] = undefined;\n    };\n    RecordingCache.prototype.clear = function () {\n        var _this = this;\n        Object.keys(this.data).forEach(function (dataId) { return _this.delete(dataId); });\n        this.recordedData = {};\n    };\n    RecordingCache.prototype.replace = function (newData) {\n        this.clear();\n        this.recordedData = __assign({}, newData);\n    };\n    return RecordingCache;\n}());\nexport { RecordingCache };\nexport function record(startingState, transaction) {\n    var recordingCache = new RecordingCache(startingState);\n    return recordingCache.record(transaction);\n}\n//# sourceMappingURL=recordingCache.js.map"]},"metadata":{},"sourceType":"module"}